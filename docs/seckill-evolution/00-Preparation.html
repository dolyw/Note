<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>æ•´ä½“æµç¨‹ | ç¬”è®°</title>
    <meta name="generator" content="VuePress 1.7.1">
    <link rel="icon" href="https://cdn.jsdelivr.net/gh/wliduo/Index@master/static/favicon.ico">
    <script type="text/javascript" src="https://unpkg.com/valine@1.4.14/dist/Valine.min.js"></script>
    <script type="text/javascript" src="https://cdn.jsdelivr.net/gh/wliduo/Index@master/static/count.js"></script>
    <meta name="description" content="ä¸–ç•Œä¸Šæœ€å¤§çš„è°è¨€å°±æ˜¯ä½ ä¸è¡Œ">
    
    <link rel="preload" href="/assets/css/0.styles.3f9dc816.css" as="style"><link rel="preload" href="/assets/js/app.89b51cd7.js" as="script"><link rel="preload" href="/assets/js/2.709773e9.js" as="script"><link rel="preload" href="/assets/js/150.77610629.js" as="script"><link rel="prefetch" href="/assets/js/10.7e42fe71.js"><link rel="prefetch" href="/assets/js/100.ec70ca31.js"><link rel="prefetch" href="/assets/js/101.6ec28e76.js"><link rel="prefetch" href="/assets/js/102.f416158b.js"><link rel="prefetch" href="/assets/js/103.a05201de.js"><link rel="prefetch" href="/assets/js/104.11e4cec5.js"><link rel="prefetch" href="/assets/js/105.bfc7903f.js"><link rel="prefetch" href="/assets/js/106.722d20ef.js"><link rel="prefetch" href="/assets/js/107.97a14bb9.js"><link rel="prefetch" href="/assets/js/108.e2053f03.js"><link rel="prefetch" href="/assets/js/109.a0275b5a.js"><link rel="prefetch" href="/assets/js/11.9fb41f2a.js"><link rel="prefetch" href="/assets/js/110.3f9e7479.js"><link rel="prefetch" href="/assets/js/111.1ff9855d.js"><link rel="prefetch" href="/assets/js/112.7ff6f275.js"><link rel="prefetch" href="/assets/js/113.68241f24.js"><link rel="prefetch" href="/assets/js/114.2baeefd9.js"><link rel="prefetch" href="/assets/js/115.70a5b7d9.js"><link rel="prefetch" href="/assets/js/116.1740bb2b.js"><link rel="prefetch" href="/assets/js/117.4ed61ccd.js"><link rel="prefetch" href="/assets/js/118.96007312.js"><link rel="prefetch" href="/assets/js/119.715bf2d3.js"><link rel="prefetch" href="/assets/js/12.40ba547a.js"><link rel="prefetch" href="/assets/js/120.fac4f5a6.js"><link rel="prefetch" href="/assets/js/121.00fdb650.js"><link rel="prefetch" href="/assets/js/122.b9d7c53a.js"><link rel="prefetch" href="/assets/js/123.431f312c.js"><link rel="prefetch" href="/assets/js/124.0bf2e0eb.js"><link rel="prefetch" href="/assets/js/125.91b84d96.js"><link rel="prefetch" href="/assets/js/126.711be191.js"><link rel="prefetch" href="/assets/js/127.483c0e17.js"><link rel="prefetch" href="/assets/js/128.27d2eabb.js"><link rel="prefetch" href="/assets/js/129.8f5b6c73.js"><link rel="prefetch" href="/assets/js/13.b39765a2.js"><link rel="prefetch" href="/assets/js/130.d99f7664.js"><link rel="prefetch" href="/assets/js/131.5bec0d22.js"><link rel="prefetch" href="/assets/js/132.b9f82654.js"><link rel="prefetch" href="/assets/js/133.1e217235.js"><link rel="prefetch" href="/assets/js/134.1b61caed.js"><link rel="prefetch" href="/assets/js/135.0e1d0fe9.js"><link rel="prefetch" href="/assets/js/136.e31c22c3.js"><link rel="prefetch" href="/assets/js/137.fb707c3c.js"><link rel="prefetch" href="/assets/js/138.cd905645.js"><link rel="prefetch" href="/assets/js/139.2f55922a.js"><link rel="prefetch" href="/assets/js/14.d0e6ff02.js"><link rel="prefetch" href="/assets/js/140.3e61eb09.js"><link rel="prefetch" href="/assets/js/141.806969cf.js"><link rel="prefetch" href="/assets/js/142.6141634a.js"><link rel="prefetch" href="/assets/js/143.d25fc846.js"><link rel="prefetch" href="/assets/js/144.81c8750a.js"><link rel="prefetch" href="/assets/js/145.f1775719.js"><link rel="prefetch" href="/assets/js/146.fd4c230c.js"><link rel="prefetch" href="/assets/js/147.a7b60a5c.js"><link rel="prefetch" href="/assets/js/148.fa14ddb3.js"><link rel="prefetch" href="/assets/js/149.dae430fb.js"><link rel="prefetch" href="/assets/js/15.b70643ab.js"><link rel="prefetch" href="/assets/js/151.c9bfe0cf.js"><link rel="prefetch" href="/assets/js/152.e3869d1c.js"><link rel="prefetch" href="/assets/js/153.07a97e4f.js"><link rel="prefetch" href="/assets/js/154.f7260db9.js"><link rel="prefetch" href="/assets/js/155.32abc96a.js"><link rel="prefetch" href="/assets/js/156.76322c0d.js"><link rel="prefetch" href="/assets/js/157.50094658.js"><link rel="prefetch" href="/assets/js/158.215bd40a.js"><link rel="prefetch" href="/assets/js/159.ad285971.js"><link rel="prefetch" href="/assets/js/16.688c8a51.js"><link rel="prefetch" href="/assets/js/160.ecd2b111.js"><link rel="prefetch" href="/assets/js/161.5c5dc4eb.js"><link rel="prefetch" href="/assets/js/162.312f1e7b.js"><link rel="prefetch" href="/assets/js/163.25a5c937.js"><link rel="prefetch" href="/assets/js/164.b00b8550.js"><link rel="prefetch" href="/assets/js/165.e0b2a6f0.js"><link rel="prefetch" href="/assets/js/166.6e6d56bd.js"><link rel="prefetch" href="/assets/js/167.ea750a2f.js"><link rel="prefetch" href="/assets/js/168.1fe9d2a9.js"><link rel="prefetch" href="/assets/js/169.50ce435e.js"><link rel="prefetch" href="/assets/js/17.609318db.js"><link rel="prefetch" href="/assets/js/170.ea9781bf.js"><link rel="prefetch" href="/assets/js/171.fbc5e63c.js"><link rel="prefetch" href="/assets/js/172.981add48.js"><link rel="prefetch" href="/assets/js/173.f07ea215.js"><link rel="prefetch" href="/assets/js/174.f03ffb6d.js"><link rel="prefetch" href="/assets/js/175.6cc5855e.js"><link rel="prefetch" href="/assets/js/176.6457b40c.js"><link rel="prefetch" href="/assets/js/177.beb8409c.js"><link rel="prefetch" href="/assets/js/178.375604f8.js"><link rel="prefetch" href="/assets/js/18.3cc1af41.js"><link rel="prefetch" href="/assets/js/19.75e3fbbf.js"><link rel="prefetch" href="/assets/js/20.9f88be39.js"><link rel="prefetch" href="/assets/js/21.cebff2ad.js"><link rel="prefetch" href="/assets/js/22.10eb0c2e.js"><link rel="prefetch" href="/assets/js/23.7d436195.js"><link rel="prefetch" href="/assets/js/24.24d47dfe.js"><link rel="prefetch" href="/assets/js/25.82ad13cf.js"><link rel="prefetch" href="/assets/js/26.0da06de4.js"><link rel="prefetch" href="/assets/js/27.b43b8c32.js"><link rel="prefetch" href="/assets/js/28.3f4a0dd3.js"><link rel="prefetch" href="/assets/js/29.4a13cf0a.js"><link rel="prefetch" href="/assets/js/3.35884236.js"><link rel="prefetch" href="/assets/js/30.fffeb185.js"><link rel="prefetch" href="/assets/js/31.e3f58055.js"><link rel="prefetch" href="/assets/js/32.f2bc2055.js"><link rel="prefetch" href="/assets/js/33.626adae7.js"><link rel="prefetch" href="/assets/js/34.95172487.js"><link rel="prefetch" href="/assets/js/35.1a22f385.js"><link rel="prefetch" href="/assets/js/36.27a6519e.js"><link rel="prefetch" href="/assets/js/37.6f05c79c.js"><link rel="prefetch" href="/assets/js/38.85188c2e.js"><link rel="prefetch" href="/assets/js/39.1c0bfcdb.js"><link rel="prefetch" href="/assets/js/4.77537cf7.js"><link rel="prefetch" href="/assets/js/40.19e181bd.js"><link rel="prefetch" href="/assets/js/41.40e32ba3.js"><link rel="prefetch" href="/assets/js/42.35a782e2.js"><link rel="prefetch" href="/assets/js/43.dfe3758b.js"><link rel="prefetch" href="/assets/js/44.d68fc78e.js"><link rel="prefetch" href="/assets/js/45.e5852a39.js"><link rel="prefetch" href="/assets/js/46.5cde6d4a.js"><link rel="prefetch" href="/assets/js/47.483e91fa.js"><link rel="prefetch" href="/assets/js/48.06905e8f.js"><link rel="prefetch" href="/assets/js/49.d6051ab5.js"><link rel="prefetch" href="/assets/js/5.e8fb5683.js"><link rel="prefetch" href="/assets/js/50.80fb9a99.js"><link rel="prefetch" href="/assets/js/51.3638c672.js"><link rel="prefetch" href="/assets/js/52.4aeac17a.js"><link rel="prefetch" href="/assets/js/53.42eacf1b.js"><link rel="prefetch" href="/assets/js/54.cd0dc300.js"><link rel="prefetch" href="/assets/js/55.379ee83d.js"><link rel="prefetch" href="/assets/js/56.b8a72f06.js"><link rel="prefetch" href="/assets/js/57.9f0c27f3.js"><link rel="prefetch" href="/assets/js/58.bb70d69c.js"><link rel="prefetch" href="/assets/js/59.c2b36b85.js"><link rel="prefetch" href="/assets/js/6.5f1ce204.js"><link rel="prefetch" href="/assets/js/60.9d0bc259.js"><link rel="prefetch" href="/assets/js/61.d21e2c5a.js"><link rel="prefetch" href="/assets/js/62.36b10f01.js"><link rel="prefetch" href="/assets/js/63.995abe15.js"><link rel="prefetch" href="/assets/js/64.d96cf9eb.js"><link rel="prefetch" href="/assets/js/65.fa983673.js"><link rel="prefetch" href="/assets/js/66.77e880b0.js"><link rel="prefetch" href="/assets/js/67.fca17636.js"><link rel="prefetch" href="/assets/js/68.4b82eb70.js"><link rel="prefetch" href="/assets/js/69.81baf713.js"><link rel="prefetch" href="/assets/js/7.0940c4fa.js"><link rel="prefetch" href="/assets/js/70.b8ba66a9.js"><link rel="prefetch" href="/assets/js/71.08c3bfa9.js"><link rel="prefetch" href="/assets/js/72.5604bd42.js"><link rel="prefetch" href="/assets/js/73.089e8693.js"><link rel="prefetch" href="/assets/js/74.c7ad8837.js"><link rel="prefetch" href="/assets/js/75.e6e79492.js"><link rel="prefetch" href="/assets/js/76.3e162422.js"><link rel="prefetch" href="/assets/js/77.4ad32c28.js"><link rel="prefetch" href="/assets/js/78.60e89cda.js"><link rel="prefetch" href="/assets/js/79.5f05dd5a.js"><link rel="prefetch" href="/assets/js/8.ec96bbfe.js"><link rel="prefetch" href="/assets/js/80.0b16380d.js"><link rel="prefetch" href="/assets/js/81.2ef072be.js"><link rel="prefetch" href="/assets/js/82.197c922d.js"><link rel="prefetch" href="/assets/js/83.8837795a.js"><link rel="prefetch" href="/assets/js/84.dcf31046.js"><link rel="prefetch" href="/assets/js/85.7d037b60.js"><link rel="prefetch" href="/assets/js/86.b64a8163.js"><link rel="prefetch" href="/assets/js/87.0c2d9444.js"><link rel="prefetch" href="/assets/js/88.753c15c1.js"><link rel="prefetch" href="/assets/js/89.db58b28e.js"><link rel="prefetch" href="/assets/js/9.b27133cb.js"><link rel="prefetch" href="/assets/js/90.258540fd.js"><link rel="prefetch" href="/assets/js/91.58e789ec.js"><link rel="prefetch" href="/assets/js/92.2c7e24f6.js"><link rel="prefetch" href="/assets/js/93.c8ac090a.js"><link rel="prefetch" href="/assets/js/94.61f65ee6.js"><link rel="prefetch" href="/assets/js/95.2476a04e.js"><link rel="prefetch" href="/assets/js/96.02978f27.js"><link rel="prefetch" href="/assets/js/97.951acf4a.js"><link rel="prefetch" href="/assets/js/98.108ad810.js"><link rel="prefetch" href="/assets/js/99.40aa304e.js">
    <link rel="stylesheet" href="/assets/css/0.styles.3f9dc816.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">ç¬”è®°</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/map.html" class="nav-link">
  æ•´ç«™åœ°å›¾
</a></div><div class="nav-item"><a href="/study.html" class="nav-link">
  å­¦ä¹ ç›®å½•
</a></div><div class="nav-item"><a href="/project.html" class="nav-link">
  å¼€æºé¡¹ç›®
</a></div><div class="nav-item"><a href="/issues.html" class="nav-link">
  ç–‘é—®æäº¤
</a></div> <a href="https://github.com/dolyw" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/map.html" class="nav-link">
  æ•´ç«™åœ°å›¾
</a></div><div class="nav-item"><a href="/study.html" class="nav-link">
  å­¦ä¹ ç›®å½•
</a></div><div class="nav-item"><a href="/project.html" class="nav-link">
  å¼€æºé¡¹ç›®
</a></div><div class="nav-item"><a href="/issues.html" class="nav-link">
  ç–‘é—®æäº¤
</a></div> <a href="https://github.com/dolyw" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><a href="/seckill-evolution/" aria-current="page" class="sidebar-link">SeckillEvolution</a></li><li><a href="/seckill-evolution/00-Preparation.html" aria-current="page" class="active sidebar-link">0. æ•´ä½“æµç¨‹</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/seckill-evolution/00-Preparation.html#_1-å¸¸è§åœºæ™¯" class="sidebar-link">1. å¸¸è§åœºæ™¯</a></li><li class="sidebar-sub-header"><a href="/seckill-evolution/00-Preparation.html#_2-æµé‡å‰Šå³°" class="sidebar-link">2. æµé‡å‰Šå³°</a></li><li class="sidebar-sub-header"><a href="/seckill-evolution/00-Preparation.html#_3-é¡¹ç›®å‡†å¤‡" class="sidebar-link">3. é¡¹ç›®å‡†å¤‡</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/seckill-evolution/00-Preparation.html#_3-1-è¡¨ç»“æ„" class="sidebar-link">3.1. è¡¨ç»“æ„</a></li><li class="sidebar-sub-header"><a href="/seckill-evolution/00-Preparation.html#_3-2-å·¥ç¨‹åˆ›å»º" class="sidebar-link">3.2. å·¥ç¨‹åˆ›å»º</a></li><li class="sidebar-sub-header"><a href="/seckill-evolution/00-Preparation.html#_3-3-åˆå§‹ä»£ç " class="sidebar-link">3.3. åˆå§‹ä»£ç </a></li></ul></li><li class="sidebar-sub-header"><a href="/seckill-evolution/00-Preparation.html#_4-æ€è·¯æµç¨‹" class="sidebar-link">4. æ€è·¯æµç¨‹</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/seckill-evolution/00-Preparation.html#_4-1-ä¼ ç»Ÿæ–¹å¼" class="sidebar-link">4.1. ä¼ ç»Ÿæ–¹å¼</a></li><li class="sidebar-sub-header"><a href="/seckill-evolution/00-Preparation.html#_4-2-ä½¿ç”¨ä¹è§‚é”" class="sidebar-link">4.2. ä½¿ç”¨ä¹è§‚é”</a></li><li class="sidebar-sub-header"><a href="/seckill-evolution/00-Preparation.html#_4-3-ä½¿ç”¨ç¼“å­˜" class="sidebar-link">4.3. ä½¿ç”¨ç¼“å­˜</a></li><li class="sidebar-sub-header"><a href="/seckill-evolution/00-Preparation.html#_4-4-ä½¿ç”¨åˆ†å¸ƒå¼é™æµ" class="sidebar-link">4.4. ä½¿ç”¨åˆ†å¸ƒå¼é™æµ</a></li><li class="sidebar-sub-header"><a href="/seckill-evolution/00-Preparation.html#_4-5-ä½¿ç”¨é˜Ÿåˆ—å¼‚æ­¥ä¸‹å•" class="sidebar-link">4.5. ä½¿ç”¨é˜Ÿåˆ—å¼‚æ­¥ä¸‹å•</a></li></ul></li></ul></li><li><a href="/seckill-evolution/01-Tradition-Process.html" class="sidebar-link">1. ä¼ ç»Ÿæ–¹å¼</a></li><li><a href="/seckill-evolution/02-Optimistic-Lock.html" class="sidebar-link">2. ä½¿ç”¨ä¹è§‚é”</a></li><li><a href="/seckill-evolution/03-Optimistic-Lock-Redis.html" class="sidebar-link">3. ä½¿ç”¨ç¼“å­˜</a></li><li><a href="/seckill-evolution/04-Distributed-Limit.html" class="sidebar-link">4. ä½¿ç”¨åˆ†å¸ƒå¼é™æµ</a></li><li><a href="/seckill-evolution/05-MQ-Async.html" class="sidebar-link">5. ä½¿ç”¨é˜Ÿåˆ—å¼‚æ­¥ä¸‹å•</a></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="æ•´ä½“æµç¨‹"><a href="#æ•´ä½“æµç¨‹" class="header-anchor">#</a> æ•´ä½“æµç¨‹</h1> <p>ä¸€ç›´æƒ³è‡ªå·±å†™ä¸€ä¸ªç®€å•çš„ç§’æ€æ¶æ„çš„æ¼”å˜ï¼ŒåŠ å¼ºè‡ªå·±ï¼Œå‚è€ƒäº†å¾ˆå¤šåšå®¢å’Œæ–‡ç« ï¼Œå¦‚æœ‰ä¸æ­£ç¡®çš„åœ°æ–¹è¯·æŒ‡å‡ºï¼Œæ„Ÿè°¢ğŸ˜‹</p> <p><strong>åœ°å€</strong></p> <ul><li>Githubï¼š<a href="https://github.com/dolyw/SeckillEvolution" target="_blank" rel="noopener noreferrer">https://github.com/dolyw/SeckillEvolution<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li>Gitee(ç äº‘)ï¼š<a href="https://gitee.com/dolyw/SeckillEvolution" target="_blank" rel="noopener noreferrer">https://gitee.com/dolyw/SeckillEvolution<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul> <p><a href="/seckill-evolution/" class="router-link-active"><strong>ç›®å½•</strong></a></p> <ul><li><strong>0. æ•´ä½“æµç¨‹</strong></li> <li><a href="/seckill-evolution/01-Tradition-Process.html">1. ä¼ ç»Ÿæ–¹å¼</a></li> <li><a href="/seckill-evolution/02-Optimistic-Lock.html">2. ä½¿ç”¨ä¹è§‚é”</a></li> <li><a href="/seckill-evolution/03-Optimistic-Lock-Redis.html">3. ä½¿ç”¨ç¼“å­˜</a></li> <li><a href="/seckill-evolution/04-Distributed-Limit.html">4. ä½¿ç”¨åˆ†å¸ƒå¼é™æµ</a></li> <li><a href="/seckill-evolution/05-MQ-Async.html">5. ä½¿ç”¨é˜Ÿåˆ—å¼‚æ­¥ä¸‹å•</a></li></ul> <h2 id="_1-å¸¸è§åœºæ™¯"><a href="#_1-å¸¸è§åœºæ™¯" class="header-anchor">#</a> 1. å¸¸è§åœºæ™¯</h2> <p>æœ€å…¸å‹çš„å°±æ˜¯æ·˜å®äº¬ä¸œç­‰ç”µå•†åŒåä¸€ç§’æ€äº†ï¼ŒçŸ­æ—¶é—´ä¸Šäº¿çš„ç”¨æˆ·æ¶Œå…¥ï¼Œç¬é—´æµé‡å·¨å¤§(é«˜å¹¶å‘)ã€‚ä¾‹å¦‚ï¼Œ<strong>200ä¸‡äººå‡†å¤‡åœ¨å‡Œæ™¨12:00å‡†å¤‡æŠ¢è´­ä¸€ä»¶å•†å“</strong>ï¼Œä½†æ˜¯<strong>å•†å“çš„æ•°é‡æ˜¯æœ‰é™çš„100ä»¶</strong>ï¼Œè¿™æ ·<strong>çœŸå®èƒ½è´­ä¹°åˆ°è¯¥ä»¶å•†å“çš„ç”¨æˆ·ä¹Ÿåªæœ‰100äººåŠä»¥ä¸‹ï¼Œä¸èƒ½å–è¶…</strong></p> <p>ä½†æ˜¯ä»ä¸šåŠ¡ä¸Šæ¥è¯´ï¼Œç§’æ€æ´»åŠ¨æ˜¯å¸Œæœ›æ›´å¤šçš„äººæ¥å‚ä¸ï¼Œä¹Ÿå°±æ˜¯æŠ¢è´­ä¹‹å‰å¸Œæœ›æœ‰è¶Šæ¥è¶Šå¤šçš„äººæ¥çœ‹è´­ä¹°å•†å“ï¼Œä½†æ˜¯ï¼Œåœ¨æŠ¢è´­æ—¶é—´è¾¾åˆ°åï¼Œç”¨æˆ·å¼€å§‹çœŸæ­£ä¸‹å•æ—¶ï¼Œ<strong>ç§’æ€çš„æœåŠ¡å™¨åç«¯å´ä¸å¸Œæœ›åŒæ—¶æœ‰å‡ ç™¾ä¸‡äººåŒæ—¶å‘èµ·æŠ¢è´­è¯·æ±‚</strong></p> <p>æˆ‘ä»¬éƒ½çŸ¥é“æœåŠ¡å™¨çš„å¤„ç†èµ„æºæ˜¯æœ‰é™çš„ï¼Œæ‰€ä»¥å‡ºç°å³°å€¼çš„æ—¶å€™ï¼Œå¾ˆå®¹æ˜“å¯¼è‡´æœåŠ¡å™¨å®•æœºï¼Œç”¨æˆ·æ— æ³•è®¿é—®çš„æƒ…å†µå‡ºç°ï¼Œè¿™å°±å¥½æ¯”å‡ºè¡Œçš„æ—¶å€™å­˜åœ¨æ—©é«˜å³°å’Œæ™šé«˜å³°çš„é—®é¢˜ï¼Œä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œå‡ºè¡Œå°±æœ‰äº†é”™å³°é™è¡Œçš„è§£å†³æ–¹æ¡ˆ</p> <p>åŒç†ï¼Œåœ¨çº¿ä¸Šçš„ç§’æ€ç­‰ä¸šåŠ¡åœºæ™¯ï¼Œä¹Ÿéœ€è¦ç±»ä¼¼çš„è§£å†³æ–¹æ¡ˆï¼Œéœ€è¦å¹³å®‰åº¦è¿‡åŒæ—¶æŠ¢è´­å¸¦æ¥çš„æµé‡å³°å€¼çš„é—®é¢˜ï¼Œè¿™å°±æ˜¯<strong>æµé‡å‰Šå³°</strong>çš„ç”±æ¥</p> <h2 id="_2-æµé‡å‰Šå³°"><a href="#_2-æµé‡å‰Šå³°" class="header-anchor">#</a> 2. æµé‡å‰Šå³°</h2> <p>å‰Šå³°ä»æœ¬è´¨ä¸Šæ¥è¯´å°±æ˜¯æ›´å¤šåœ°å»¶ç¼“ç”¨æˆ·è¯·æ±‚ï¼Œä»¥åŠå±‚å±‚è¿‡æ»¤ç”¨æˆ·çš„è®¿é—®éœ€æ±‚ï¼Œéµä»<strong>æœ€åè½åœ°åˆ°æ•°æ®åº“çš„è¯·æ±‚æ•°è¦å°½é‡å°‘</strong>çš„åŸåˆ™</p> <p>æµé‡å‰Šå³°ä¸»è¦æœ‰ä¸‰ç§æ“ä½œæ€è·¯(<strong>æ’é˜Ÿï¼Œç­”é¢˜ï¼Œè¿‡æ»¤</strong>)ï¼Œç®€å•è¯´ä¸‹</p> <ol><li><p><strong>æ’é˜Ÿ</strong>æœ€å®¹æ˜“æƒ³åˆ°çš„è§£å†³æ–¹æ¡ˆå°±æ˜¯ç”¨<strong>æ¶ˆæ¯é˜Ÿåˆ—</strong>æ¥ç¼“å†²ç¬æ—¶æµé‡ï¼ŒæŠŠåŒæ­¥çš„ç›´æ¥è°ƒç”¨è½¬æ¢æˆå¼‚æ­¥çš„é—´æ¥æ¨é€ï¼Œä¸­é—´é€šè¿‡ä¸€ä¸ªé˜Ÿåˆ—åœ¨ä¸€ç«¯æ‰¿æ¥ç¬æ—¶çš„æµé‡æ´ªå³°ï¼Œåœ¨å¦ä¸€ç«¯å¹³æ»‘åœ°å°†æ¶ˆæ¯æ¨é€å‡ºå»ï¼Œåœ¨è¿™é‡Œï¼Œ<strong>æ¶ˆæ¯é˜Ÿåˆ—</strong>å°±åƒ<strong>æ°´åº“</strong>ä¸€æ ·ï¼Œæ‹¦è“„ä¸Šæ¸¸çš„æ´ªæ°´ï¼Œå‰Šå‡è¿›å…¥ä¸‹æ¸¸æ²³é“çš„æ´ªå³°æµé‡ï¼Œä»è€Œè¾¾åˆ°å‡å…æ´ªæ°´ç¾å®³çš„ç›®çš„</p></li> <li><p><strong>ç­”é¢˜</strong>ç›®çš„å…¶å®å°±æ˜¯å»¶ç¼“è¯·æ±‚ï¼Œèµ·åˆ°å¯¹è¯·æ±‚æµé‡è¿›è¡Œå‰Šå³°çš„ä½œç”¨ï¼Œä»è€Œè®©ç³»ç»Ÿèƒ½å¤Ÿæ›´å¥½åœ°æ”¯æŒç¬æ—¶çš„æµé‡é«˜å³°</p></li> <li><p>å‰é¢ä»‹ç»çš„æ’é˜Ÿå’Œç­”é¢˜ï¼Œè¦ä¹ˆæ˜¯åœ¨æ¥æ”¶è¯·æ±‚æ—¶åšç¼“å†²ï¼Œè¦ä¹ˆæ˜¯å‡å°‘è¯·æ±‚çš„åŒæ—¶å‘é€ï¼Œè€Œé’ˆå¯¹ç§’æ€åœºæ™¯è¿˜æœ‰ä¸€ç§æ–¹æ³•ï¼Œå°±æ˜¯å¯¹è¯·æ±‚è¿›è¡Œ<strong>åˆ†å±‚è¿‡æ»¤</strong>ï¼Œä»è€Œè¿‡æ»¤æ‰ä¸€äº›æ— æ•ˆçš„è¯·æ±‚ï¼Œä»Webå±‚æ¥åˆ°è¯·æ±‚ï¼Œåˆ°ç¼“å­˜ï¼Œæ¶ˆæ¯é˜Ÿåˆ—ï¼Œæœ€ç»ˆåˆ°æ•°æ®åº“è¿™æ ·å°±åƒæ¼æ–—ä¸€æ ·ï¼Œå°½é‡æŠŠæ•°æ®é‡å’Œè¯·æ±‚é‡ä¸€å±‚ä¸€å±‚åœ°è¿‡æ»¤å’Œå‡å°‘äº†ï¼Œæœ€ç»ˆï¼Œåˆ°æ¼æ–—æœ€æœ«ç«¯(æ•°æ®åº“)çš„æ‰æ˜¯æœ‰æ•ˆè¯·æ±‚</p></li></ol> <h2 id="_3-é¡¹ç›®å‡†å¤‡"><a href="#_3-é¡¹ç›®å‡†å¤‡" class="header-anchor">#</a> 3. é¡¹ç›®å‡†å¤‡</h2> <h3 id="_3-1-è¡¨ç»“æ„"><a href="#_3-1-è¡¨ç»“æ„" class="header-anchor">#</a> 3.1. è¡¨ç»“æ„</h3> <p>è¿™é‡Œæˆ‘é‡‡ç”¨çš„æ˜¯<strong>MySQL</strong>ï¼Œç®€å•çš„ä½¿ç”¨ä¸¤ä¸ªè¡¨ï¼Œä¸€ä¸ªåº“å­˜è¡¨ï¼Œä¸€ä¸ªè®¢å•è¡¨ï¼Œæ’å…¥ä¸€æ¡å•†å“æ•°æ®</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token comment">--- åˆ é™¤æ•°æ®åº“</span>
<span class="token keyword">drop</span> <span class="token keyword">database</span> seckill<span class="token punctuation">;</span>
<span class="token comment">--- åˆ›å»ºæ•°æ®åº“</span>
<span class="token keyword">create</span> <span class="token keyword">database</span> seckill<span class="token punctuation">;</span>
<span class="token comment">--- ä½¿ç”¨æ•°æ®åº“</span>
<span class="token keyword">use</span> seckill<span class="token punctuation">;</span>
<span class="token comment">--- åˆ›å»ºåº“å­˜è¡¨</span>
<span class="token keyword">DROP</span> <span class="token keyword">TABLE</span> <span class="token keyword">IF</span> <span class="token keyword">EXISTS</span> <span class="token punctuation">`</span>t_seckill_stock<span class="token punctuation">`</span><span class="token punctuation">;</span>
<span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> <span class="token punctuation">`</span>t_seckill_stock<span class="token punctuation">`</span> <span class="token punctuation">(</span>
  <span class="token punctuation">`</span>id<span class="token punctuation">`</span> <span class="token keyword">int</span><span class="token punctuation">(</span><span class="token number">11</span><span class="token punctuation">)</span> <span class="token keyword">unsigned</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span> <span class="token keyword">AUTO_INCREMENT</span> <span class="token keyword">COMMENT</span> <span class="token string">'åº“å­˜ID'</span><span class="token punctuation">,</span>
  <span class="token punctuation">`</span>name<span class="token punctuation">`</span> <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">)</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span> <span class="token keyword">DEFAULT</span> <span class="token string">'OnePlus 7 Pro'</span> <span class="token keyword">COMMENT</span> <span class="token string">'åç§°'</span><span class="token punctuation">,</span>
  <span class="token punctuation">`</span>count<span class="token punctuation">`</span> <span class="token keyword">int</span><span class="token punctuation">(</span><span class="token number">11</span><span class="token punctuation">)</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span> <span class="token keyword">COMMENT</span> <span class="token string">'åº“å­˜'</span><span class="token punctuation">,</span>
  <span class="token punctuation">`</span>sale<span class="token punctuation">`</span> <span class="token keyword">int</span><span class="token punctuation">(</span><span class="token number">11</span><span class="token punctuation">)</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span> <span class="token keyword">COMMENT</span> <span class="token string">'å·²å”®'</span><span class="token punctuation">,</span>
  <span class="token punctuation">`</span>version<span class="token punctuation">`</span> <span class="token keyword">int</span><span class="token punctuation">(</span><span class="token number">11</span><span class="token punctuation">)</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span> <span class="token keyword">COMMENT</span> <span class="token string">'ä¹è§‚é”ï¼Œç‰ˆæœ¬å·'</span><span class="token punctuation">,</span>
  <span class="token punctuation">`</span>create_time<span class="token punctuation">`</span> <span class="token keyword">timestamp</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span> <span class="token keyword">DEFAULT</span> <span class="token keyword">CURRENT_TIMESTAMP</span> <span class="token keyword">COMMENT</span> <span class="token string">'åˆ›å»ºæ—¶é—´'</span><span class="token punctuation">,</span>
  <span class="token punctuation">`</span>update_time<span class="token punctuation">`</span> <span class="token keyword">timestamp</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span> <span class="token keyword">DEFAULT</span> <span class="token keyword">CURRENT_TIMESTAMP</span> <span class="token keyword">ON</span> <span class="token keyword">UPDATE</span> <span class="token keyword">CURRENT_TIMESTAMP</span> <span class="token keyword">COMMENT</span> <span class="token string">'æ›´æ–°æ—¶é—´'</span><span class="token punctuation">,</span>
  <span class="token keyword">PRIMARY</span> <span class="token keyword">KEY</span> <span class="token punctuation">(</span><span class="token punctuation">`</span>id<span class="token punctuation">`</span><span class="token punctuation">)</span>
<span class="token punctuation">)</span> <span class="token keyword">ENGINE</span><span class="token operator">=</span><span class="token keyword">InnoDB</span> <span class="token keyword">DEFAULT</span> <span class="token keyword">CHARSET</span><span class="token operator">=</span>utf8mb4 <span class="token keyword">COLLATE</span><span class="token operator">=</span>utf8mb4_bin <span class="token keyword">COMMENT</span><span class="token operator">=</span><span class="token string">'åº“å­˜è¡¨'</span><span class="token punctuation">;</span>
<span class="token comment">--- æ’å…¥ä¸€æ¡å•†å“ï¼Œåˆå§‹åŒ–10ä¸ªåº“å­˜</span>
<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> <span class="token punctuation">`</span>t_seckill_stock<span class="token punctuation">`</span> <span class="token punctuation">(</span><span class="token punctuation">`</span>count<span class="token punctuation">`</span><span class="token punctuation">,</span> <span class="token punctuation">`</span>sale<span class="token punctuation">`</span><span class="token punctuation">,</span> <span class="token punctuation">`</span>version<span class="token punctuation">`</span><span class="token punctuation">)</span> <span class="token keyword">VALUES</span> <span class="token punctuation">(</span><span class="token string">'10'</span><span class="token punctuation">,</span> <span class="token string">'0'</span><span class="token punctuation">,</span> <span class="token string">'0'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">--- åˆ›å»ºåº“å­˜è®¢å•è¡¨</span>
<span class="token keyword">DROP</span> <span class="token keyword">TABLE</span> <span class="token keyword">IF</span> <span class="token keyword">EXISTS</span> <span class="token punctuation">`</span>t_seckill_stock_order<span class="token punctuation">`</span><span class="token punctuation">;</span>
<span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> <span class="token punctuation">`</span>t_seckill_stock_order<span class="token punctuation">`</span> <span class="token punctuation">(</span>
  <span class="token punctuation">`</span>id<span class="token punctuation">`</span> <span class="token keyword">int</span><span class="token punctuation">(</span><span class="token number">11</span><span class="token punctuation">)</span> <span class="token keyword">unsigned</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span> <span class="token keyword">AUTO_INCREMENT</span><span class="token punctuation">,</span>
  <span class="token punctuation">`</span>stock_id<span class="token punctuation">`</span> <span class="token keyword">int</span><span class="token punctuation">(</span><span class="token number">11</span><span class="token punctuation">)</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span> <span class="token keyword">COMMENT</span> <span class="token string">'åº“å­˜ID'</span><span class="token punctuation">,</span>
  <span class="token punctuation">`</span>name<span class="token punctuation">`</span> <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">30</span><span class="token punctuation">)</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span> <span class="token keyword">DEFAULT</span> <span class="token string">'OnePlus 7 Pro'</span> <span class="token keyword">COMMENT</span> <span class="token string">'å•†å“åç§°'</span><span class="token punctuation">,</span>
  <span class="token punctuation">`</span>create_time<span class="token punctuation">`</span> <span class="token keyword">timestamp</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span> <span class="token keyword">DEFAULT</span> <span class="token keyword">CURRENT_TIMESTAMP</span> <span class="token keyword">ON</span> <span class="token keyword">UPDATE</span> <span class="token keyword">CURRENT_TIMESTAMP</span> <span class="token keyword">COMMENT</span> <span class="token string">'åˆ›å»ºæ—¶é—´'</span><span class="token punctuation">,</span>
  <span class="token keyword">PRIMARY</span> <span class="token keyword">KEY</span> <span class="token punctuation">(</span><span class="token punctuation">`</span>id<span class="token punctuation">`</span><span class="token punctuation">)</span>
<span class="token punctuation">)</span> <span class="token keyword">ENGINE</span><span class="token operator">=</span><span class="token keyword">InnoDB</span> <span class="token keyword">DEFAULT</span> <span class="token keyword">CHARSET</span><span class="token operator">=</span>utf8mb4 <span class="token keyword">COLLATE</span><span class="token operator">=</span>utf8mb4_bin <span class="token keyword">COMMENT</span><span class="token operator">=</span><span class="token string">'åº“å­˜è®¢å•è¡¨'</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="_3-2-å·¥ç¨‹åˆ›å»º"><a href="#_3-2-å·¥ç¨‹åˆ›å»º" class="header-anchor">#</a> 3.2. å·¥ç¨‹åˆ›å»º</h3> <p>è¿™ä¸ªè‡ªè¡Œåˆ›å»ºå³å¯ï¼Œæˆ‘åˆ›å»ºçš„æ˜¯ä¸€ä¸ª<strong>SpringBoot2</strong>é¡¹ç›®ï¼Œç„¶åä½¿ç”¨<strong>ä»£ç ç”Ÿæˆå·¥å…·</strong>: <a href="https://github.com/dolyw/ViewGenerator" target="_blank" rel="noopener noreferrer">ViewGenerator<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>ï¼Œæ ¹æ®è¡¨ç»“æ„ç”Ÿæˆä¸€ä¸‹å¯¹åº”çš„æ–‡ä»¶ï¼Œè®°å¾—ç§»é™¤è¡¨å‰ç¼€å‚æ•°<code>t_seckill_</code></p> <p><img src="https://cdn.jsdelivr.net/gh/wliduo/CDN@1.1/2019/11/20191120002.png" alt="å›¾ç‰‡"></p> <p>ä½¿ç”¨<strong>é€šç”¨Mapper</strong>è¦åœ¨<strong>Application</strong>å¤„åŠ ä¸ªæ³¨è§£<code>@tk.mybatis.spring.annotation.MapperScan</code></p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token annotation punctuation">@SpringBootApplication</span>
<span class="token annotation punctuation">@tk</span><span class="token punctuation">.</span>mybatis<span class="token punctuation">.</span>spring<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span><span class="token class-name">MapperScan</span><span class="token punctuation">(</span><span class="token string">&quot;com.example.dao&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Application</span> <span class="token punctuation">{</span>

    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">SpringApplication</span><span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token class-name">Application</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span> args<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

<span class="token punctuation">}</span>
</code></pre></div><p><strong>SpringBoot2</strong>è¿æ¥<strong>MySQL</strong><code>url</code>å±æ€§è¦é…ç½®<strong>serverTimezone=GMT%2B8</strong>ï¼Œ<code>driver-class-name</code>å±æ€§è¦æ”¹ä¸º<strong>com.mysql.cj.jdbc.Driver</strong></p> <div class="language-yml extra-class"><pre class="language-yml"><code><span class="token key atrule">server</span><span class="token punctuation">:</span>
    <span class="token key atrule">port</span><span class="token punctuation">:</span> <span class="token number">8080</span>

<span class="token key atrule">spring</span><span class="token punctuation">:</span>
    <span class="token key atrule">datasource</span><span class="token punctuation">:</span>
        <span class="token key atrule">name</span><span class="token punctuation">:</span> SeckillEvolution
        <span class="token key atrule">url</span><span class="token punctuation">:</span> jdbc<span class="token punctuation">:</span>mysql<span class="token punctuation">:</span>//127.0.0.1<span class="token punctuation">:</span>3306/seckill<span class="token punctuation">?</span>serverTimezone=GMT%2B8<span class="token important">&amp;useSSL=false&amp;useUnicode=true&amp;characterEncoding=UTF-</span><span class="token number">8</span>
        <span class="token key atrule">username</span><span class="token punctuation">:</span> root
        <span class="token key atrule">password</span><span class="token punctuation">:</span> root
        <span class="token comment"># ä½¿ç”¨Druidæ•°æ®æº</span>
        <span class="token key atrule">type</span><span class="token punctuation">:</span> com.alibaba.druid.pool.DruidDataSource
        <span class="token key atrule">driver-class-name</span><span class="token punctuation">:</span> com.mysql.jdbc.Driver
        <span class="token key atrule">druid</span><span class="token punctuation">:</span>
            <span class="token key atrule">filters</span><span class="token punctuation">:</span> stat
            <span class="token key atrule">maxActive</span><span class="token punctuation">:</span> <span class="token number">20</span>
            <span class="token key atrule">initialSize</span><span class="token punctuation">:</span> <span class="token number">1</span>
            <span class="token key atrule">maxWait</span><span class="token punctuation">:</span> <span class="token number">60000</span>
            <span class="token key atrule">minIdle</span><span class="token punctuation">:</span> <span class="token number">1</span>
            <span class="token key atrule">timeBetweenEvictionRunsMillis</span><span class="token punctuation">:</span> <span class="token number">60000</span>
            <span class="token key atrule">minEvictableIdleTimeMillis</span><span class="token punctuation">:</span> <span class="token number">300000</span>
            <span class="token key atrule">validationQuery</span><span class="token punctuation">:</span> select 'x'
            <span class="token key atrule">testWhileIdle</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
            <span class="token key atrule">testOnBorrow</span><span class="token punctuation">:</span> <span class="token boolean important">false</span>
            <span class="token key atrule">testOnReturn</span><span class="token punctuation">:</span> <span class="token boolean important">false</span>
            <span class="token key atrule">poolPreparedStatements</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
            <span class="token key atrule">maxOpenPreparedStatements</span><span class="token punctuation">:</span> <span class="token number">20</span>
    <span class="token comment"># 404äº¤ç»™å¼‚å¸¸å¤„ç†å™¨å¤„ç†</span>
    <span class="token key atrule">mvc</span><span class="token punctuation">:</span>
        <span class="token key atrule">throw-exception-if-no-handler-found</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
    <span class="token comment"># 404äº¤ç»™å¼‚å¸¸å¤„ç†å™¨å¤„ç†</span>
    <span class="token key atrule">resources</span><span class="token punctuation">:</span>
        <span class="token key atrule">add-mappings</span><span class="token punctuation">:</span> <span class="token boolean important">false</span>

<span class="token key atrule">mybatis</span><span class="token punctuation">:</span>
    <span class="token comment"># Mybatisé…ç½®Mapperè·¯å¾„</span>
    <span class="token key atrule">mapper-locations</span><span class="token punctuation">:</span> classpath<span class="token punctuation">:</span>mapper/<span class="token important">*.xml</span>
    <span class="token comment"># Mybatisé…ç½®Modelç±»å¯¹åº”</span>
    <span class="token key atrule">type-aliases-package</span><span class="token punctuation">:</span> com.example.dto.custom

<span class="token key atrule">pagehelper</span><span class="token punctuation">:</span>
    <span class="token key atrule">params</span><span class="token punctuation">:</span> count=countSql
    <span class="token comment"># æŒ‡å®šåˆ†é¡µæ’ä»¶ä½¿ç”¨å“ªç§æ–¹è¨€</span>
    <span class="token key atrule">helper-dialect</span><span class="token punctuation">:</span> mysql
    <span class="token comment"># åˆ†é¡µåˆç†åŒ–å‚æ•° pageNum&lt;=0æ—¶ä¼šæŸ¥è¯¢ç¬¬ä¸€é¡µ pageNum&gt;pages(è¶…è¿‡æ€»æ•°æ—¶) ä¼šæŸ¥è¯¢æœ€åä¸€é¡µ</span>
    <span class="token key atrule">reasonable</span><span class="token punctuation">:</span> <span class="token string">'true'</span>
    <span class="token key atrule">support-methods-arguments</span><span class="token punctuation">:</span> <span class="token string">'true'</span>

<span class="token key atrule">mapper</span><span class="token punctuation">:</span>
    <span class="token comment"># é€šç”¨Mapperçš„insertSelectiveå’ŒupdateByPrimaryKeySelectiveä¸­æ˜¯å¦åˆ¤æ–­å­—ç¬¦ä¸²ç±»å‹!=''</span>
    <span class="token key atrule">not-empty</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>

<span class="token key atrule">logging</span><span class="token punctuation">:</span>
    <span class="token comment"># Debugæ‰“å°SQL</span>
    <span class="token key atrule">level.com.example.dao</span><span class="token punctuation">:</span> debug
</code></pre></div><h3 id="_3-3-åˆå§‹ä»£ç "><a href="#_3-3-åˆå§‹ä»£ç " class="header-anchor">#</a> 3.3. åˆå§‹ä»£ç </h3> <p>å…ˆç¼–å†™ä¸€ä¸ªå…¥å£<strong>Controller</strong>ï¼Œé»˜è®¤æœ‰ä¸€ä¸ªåˆå§‹åŒ–åº“å­˜æ–¹æ³•</p> <ul><li><strong>SeckillEvolutionController</strong></li></ul> <div class="language-java extra-class"><pre class="language-java"><code><span class="token comment">/**
 * ä¸€ä¸ªç®€å•çš„ç§’æ€æ¶æ„çš„æ¼”å˜
 *
 * @author wliduo[i@dolyw.com]
 * @date 2019/11/20 19:49
 */</span>
<span class="token annotation punctuation">@RestController</span>
<span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span><span class="token string">&quot;/seckill&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SeckillEvolutionController</span> <span class="token punctuation">{</span>

    <span class="token comment">/**
     * logger
     */</span>
    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token class-name">Logger</span> logger <span class="token operator">=</span> <span class="token class-name">LoggerFactory</span><span class="token punctuation">.</span><span class="token function">getLogger</span><span class="token punctuation">(</span><span class="token class-name">SeckillEvolutionController</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">private</span> <span class="token keyword">final</span> <span class="token class-name">IStockService</span> stockService<span class="token punctuation">;</span>

    <span class="token keyword">private</span> <span class="token keyword">final</span> <span class="token class-name">IStockOrderService</span> stockOrderService<span class="token punctuation">;</span>

    <span class="token keyword">private</span> <span class="token keyword">final</span> <span class="token class-name">ISeckillEvolutionService</span> seckillEvolutionService<span class="token punctuation">;</span>

    <span class="token comment">/**
     * æ„é€ æ³¨å…¥
     * @param stockService
     * @param stockOrderService
     */</span>
    <span class="token annotation punctuation">@Autowired</span>
    <span class="token keyword">public</span> <span class="token class-name">SeckillEvolutionController</span><span class="token punctuation">(</span><span class="token class-name">IStockService</span> stockService<span class="token punctuation">,</span> <span class="token class-name">IStockOrderService</span> stockOrderService<span class="token punctuation">,</span>
                                      <span class="token class-name">ISeckillEvolutionService</span> seckillEvolutionService<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>stockService <span class="token operator">=</span> stockService<span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>stockOrderService <span class="token operator">=</span> stockOrderService<span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>seckillEvolutionService <span class="token operator">=</span> seckillEvolutionService<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">/**
     * åˆå§‹åŒ–åº“å­˜æ•°é‡
     */</span>
    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token class-name">Integer</span> ITEM_STOCK_COUNT <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span>

    <span class="token comment">/**
     * åˆå§‹åŒ–å–å‡ºæ•°é‡ï¼Œä¹è§‚é”ç‰ˆæœ¬
     */</span>
    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token class-name">Integer</span> ITEM_STOCK_SALE <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>

    <span class="token comment">/**
     * åˆå§‹åŒ–åº“å­˜æ•°é‡
     * 
     * @param id å•†å“ID
     * @return com.example.common.ResponseBean
     * @throws 
     * @author wliduo[i@dolyw.com]
     * @date 2019/11/22 15:59
     */</span>
    <span class="token annotation punctuation">@PutMapping</span><span class="token punctuation">(</span><span class="token string">&quot;/init/{id}&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token class-name">ResponseBean</span> <span class="token function">init</span><span class="token punctuation">(</span><span class="token annotation punctuation">@PathVariable</span><span class="token punctuation">(</span><span class="token string">&quot;id&quot;</span><span class="token punctuation">)</span> <span class="token class-name">Integer</span> id<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// æ›´æ–°åº“å­˜è¡¨è¯¥å•†å“çš„åº“å­˜ï¼Œå·²å”®ï¼Œä¹è§‚é”ç‰ˆæœ¬å·</span>
        <span class="token class-name">StockDto</span> stockDto <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">StockDto</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        stockDto<span class="token punctuation">.</span><span class="token function">setId</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span>
        stockDto<span class="token punctuation">.</span><span class="token function">setName</span><span class="token punctuation">(</span><span class="token class-name">Constant</span><span class="token punctuation">.</span>ITEM_STOCK_NAME<span class="token punctuation">)</span><span class="token punctuation">;</span>
        stockDto<span class="token punctuation">.</span><span class="token function">setCount</span><span class="token punctuation">(</span>ITEM_STOCK_COUNT<span class="token punctuation">)</span><span class="token punctuation">;</span>
        stockDto<span class="token punctuation">.</span><span class="token function">setSale</span><span class="token punctuation">(</span>ITEM_STOCK_SALE<span class="token punctuation">)</span><span class="token punctuation">;</span>
        stockDto<span class="token punctuation">.</span><span class="token function">setVersion</span><span class="token punctuation">(</span>ITEM_STOCK_SALE<span class="token punctuation">)</span><span class="token punctuation">;</span>
        stockService<span class="token punctuation">.</span><span class="token function">updateByPrimaryKey</span><span class="token punctuation">(</span>stockDto<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// åˆ é™¤è®¢å•è¡¨è¯¥å•†å“æ‰€æœ‰æ•°æ®</span>
        <span class="token class-name">StockOrderDto</span> stockOrderDto <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">StockOrderDto</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        stockOrderDto<span class="token punctuation">.</span><span class="token function">setStockId</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span>
        stockOrderService<span class="token punctuation">.</span><span class="token function">delete</span><span class="token punctuation">(</span>stockOrderDto<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">ResponseBean</span><span class="token punctuation">(</span><span class="token class-name">HttpStatus</span><span class="token punctuation">.</span>OK<span class="token punctuation">.</span><span class="token function">value</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">&quot;åˆå§‹åŒ–åº“å­˜æˆåŠŸ&quot;</span><span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

<span class="token punctuation">}</span>
</code></pre></div><p>å†åˆ›å»ºä¸€ä¸ª<strong>Service</strong>æä¾›æµç¨‹ä½¿ç”¨</p> <ul><li><strong>ISeckillEvolutionService</strong></li></ul> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>example<span class="token punctuation">.</span>service</span><span class="token punctuation">;</span>

<span class="token comment">/**
 * ISeckillEvolutionService
 *
 * @author wliduo[i@dolyw.com]
 * @date 2019-11-20 18:03:33
 */</span>
<span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">ISeckillEvolutionService</span> <span class="token punctuation">{</span>

<span class="token punctuation">}</span>
</code></pre></div><ul><li><strong>SeckillEvolutionServiceImpl</strong></li></ul> <div class="language-java extra-class"><pre class="language-java"><code><span class="token comment">/**
 * StockServiceImpl
 *
 * @author wliduo[i@dolyw.com]
 * @date 2019-11-20 18:03:33
 */</span>
<span class="token annotation punctuation">@Service</span><span class="token punctuation">(</span><span class="token string">&quot;seckillEvolutionService&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SeckillEvolutionServiceImpl</span> <span class="token keyword">implements</span> <span class="token class-name">ISeckillEvolutionService</span> <span class="token punctuation">{</span>

<span class="token punctuation">}</span>
</code></pre></div><p>æœ€åæä¾›ä¸€ä¸ªç§’æ€æ¥å£ä»¥ä¾›å®ç°</p> <ul><li><strong>ISeckillService</strong></li></ul> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>example<span class="token punctuation">.</span>seckill</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token namespace">com<span class="token punctuation">.</span>example<span class="token punctuation">.</span>dto<span class="token punctuation">.</span>custom<span class="token punctuation">.</span></span><span class="token class-name">StockDto</span><span class="token punctuation">;</span>

<span class="token comment">/**
 * ç»Ÿä¸€æ¥å£
 *
 * @author wliduo[i@dolyw.com]
 * @date 2019-11-20 18:03:33
 */</span>
<span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">ISeckillService</span> <span class="token punctuation">{</span>

    <span class="token comment">/**
     * æ£€æŸ¥åº“å­˜
     *
     * @param id
     * @return com.example.dto.custom.StockDto
     * @throws
     * @author wliduo[i@dolyw.com]
     * @date 2019/11/20 20:22
     */</span>
    <span class="token class-name">StockDto</span> <span class="token function">checkStock</span><span class="token punctuation">(</span><span class="token class-name">Integer</span> id<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">/**
     * æ‰£åº“å­˜
     *
     * @param stockDto
     * @return java.lang.Integer æ“ä½œæˆåŠŸæ¡æ•°
     * @throws
     * @author wliduo[i@dolyw.com]
     * @date 2019/11/20 20:24
     */</span>
    <span class="token class-name">Integer</span> <span class="token function">saleStock</span><span class="token punctuation">(</span><span class="token class-name">StockDto</span> stockDto<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">/**
     * ä¸‹è®¢å•
     *
     * @param stockDto
     * @return java.lang.Integer æ“ä½œæˆåŠŸæ¡æ•°
     * @throws
     * @author wliduo[i@dolyw.com]
     * @date 2019/11/20 20:26
     */</span>
    <span class="token class-name">Integer</span> <span class="token function">createOrder</span><span class="token punctuation">(</span><span class="token class-name">StockDto</span> stockDto<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token punctuation">}</span>
</code></pre></div><h2 id="_4-æ€è·¯æµç¨‹"><a href="#_4-æ€è·¯æµç¨‹" class="header-anchor">#</a> 4. æ€è·¯æµç¨‹</h2> <p>ä¸€èˆ¬çš„ç§’æ€æµç¨‹ä»åå°æ¥æ”¶åˆ°è¯·æ±‚å¼€å§‹ä¸å¤–ä¹æ˜¯è¿™æ ·çš„(è¿™é‡Œä¸è€ƒè™‘å‰ç«¯çš„ç­”é¢˜ï¼ŒéªŒè¯ç ç­‰æµç¨‹ï¼Œç›´æ¥ä»¥æœ€ç»ˆåç«¯ä¸‹å•çš„è¯·æ±‚å¼€å§‹)</p> <ol><li>ç”¨æˆ·é€šè¿‡å‰ç«¯æ ¡éªŒæœ€ç»ˆå‘èµ·è¯·æ±‚åˆ°åç«¯</li> <li>ç„¶åæ ¡éªŒåº“å­˜ï¼Œæ‰£åº“å­˜ï¼Œåˆ›å»ºè®¢å•</li> <li>æœ€ç»ˆæ•°æ®è½åœ°ï¼ŒæŒä¹…åŒ–ä¿å­˜</li></ol> <h3 id="_4-1-ä¼ ç»Ÿæ–¹å¼"><a href="#_4-1-ä¼ ç»Ÿæ–¹å¼" class="header-anchor">#</a> 4.1. ä¼ ç»Ÿæ–¹å¼</h3> <p>æˆ‘ä»¬é¦–å…ˆæ­å»ºä¸€ä¸ªåå°æœåŠ¡æ¥å£(å®ç°æ ¡éªŒåº“å­˜ï¼Œæ‰£åº“å­˜ï¼Œåˆ›å»ºè®¢å•)ï¼Œä¸åšä»»ä½•é™åˆ¶ï¼Œä½¿ç”¨<strong>JMeter</strong>ï¼Œæ¨¡æ‹Ÿ<strong>500</strong>ä¸ªå¹¶å‘çº¿ç¨‹æµ‹è¯•è´­ä¹°<strong>10</strong>ä¸ªåº“å­˜çš„å•†å“ï¼Œåœ°å€: <a href="/seckill-evolution/01-Tradition-Process.html">1. ä¼ ç»Ÿæ–¹å¼</a></p> <p>å¯ä»¥å‘ç°<strong>å¹¶å‘äº‹åŠ¡ä¸‹ä¼šå‡ºç°é”™è¯¯</strong>ï¼Œå‡ºç°<strong>å–è¶…é—®é¢˜</strong>ï¼Œè¿™æ˜¯å› ä¸ºåŒä¸€æ—¶é—´å¤§é‡çº¿ç¨‹åŒæ—¶è¯·æ±‚æ ¡éªŒåº“å­˜ï¼Œæ‰£åº“å­˜ï¼Œåˆ›å»ºè®¢å•ï¼Œè¿™ä¸‰ä¸ªæ“ä½œä¸åœ¨åŒä¸€ä¸ªåŸå­ï¼Œæ¯”å¦‚ï¼Œå¾ˆå¤šçº¿ç¨‹åŒæ—¶è¯»åˆ°åº“å­˜ä¸º<strong>10</strong>ï¼Œè¿™æ ·éƒ½ç©¿è¿‡äº†æ ¡éªŒåº“å­˜çš„åˆ¤æ–­ï¼Œæ‰€ä»¥å‡ºç°å–è¶…é—®é¢˜</p> <p>åœ¨è¿™ç§æƒ…å†µä¸‹å°±å¼•å…¥äº†<strong>é”</strong>çš„æ¦‚å¿µï¼Œé”åŒºåˆ†ä¸º<strong>ä¹è§‚é”å’Œæ‚²è§‚é”</strong>ï¼Œæ‚²è§‚é”éƒ½æ˜¯ç‰ºç‰²æ€§èƒ½ä¿è¯æ•°æ®ï¼Œæ‰€ä»¥åœ¨è¿™ç§é«˜å¹¶å‘åœºæ™¯ä¸‹ï¼Œä¸€èˆ¬éƒ½æ˜¯ä½¿ç”¨<strong>ä¹è§‚é”</strong>è§£å†³</p> <h3 id="_4-2-ä½¿ç”¨ä¹è§‚é”"><a href="#_4-2-ä½¿ç”¨ä¹è§‚é”" class="header-anchor">#</a> 4.2. ä½¿ç”¨ä¹è§‚é”</h3> <p>æˆ‘ä»¬å†æ­å»ºä¸€ä¸ªåå°æœåŠ¡æ¥å£(å®ç°æ ¡éªŒåº“å­˜ï¼Œæ‰£åº“å­˜ï¼Œåˆ›å»ºè®¢å•)ï¼Œä½†æ˜¯è¿™æ¬¡æˆ‘ä»¬éœ€è¦ä½¿ç”¨<strong>ä¹è§‚é”</strong>ï¼Œè¿™é‡Œå¯ä»¥å…ˆæŸ¥çœ‹ä¸€ç¯‡æ–‡ç« : <a href="http://note.dolyw.com/database/01-MySQL-Lock.html" target="_blank" rel="noopener noreferrer">MySQLé‚£äº›é”<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p>ä½¿ç”¨<strong>JMeter</strong>ï¼Œæ¨¡æ‹Ÿ<strong>500</strong>ä¸ªå¹¶å‘çº¿ç¨‹æµ‹è¯•è´­ä¹°<strong>10</strong>ä¸ªåº“å­˜çš„å•†å“ï¼Œåœ°å€: <a href="/seckill-evolution/02-Optimistic-Lock.html">2. ä½¿ç”¨ä¹è§‚é”</a></p> <p>å¯ä»¥å‘ç°ä¹è§‚é”è§£å†³<strong>å–è¶…é—®é¢˜</strong>ï¼Œå¤šä¸ªçº¿ç¨‹åŒæ—¶åœ¨<strong>æ£€æŸ¥åº“å­˜</strong>çš„æ—¶å€™éƒ½ä¼šæ‹¿åˆ°å½“å‰å•†å“çš„ç›¸åŒä¹è§‚é”ç‰ˆæœ¬å·ï¼Œç„¶ååœ¨<strong>æ‰£åº“å­˜</strong>æ—¶ï¼Œå¦‚æœç‰ˆæœ¬å·ä¸å¯¹ï¼Œå°±ä¼šæ‰£å‡å¤±è´¥ï¼ŒæŠ›å‡ºå¼‚å¸¸ç»“æŸï¼Œè¿™æ ·æ¯ä¸ªç‰ˆæœ¬å·å°±åªèƒ½æœ‰ç¬¬ä¸€ä¸ªçº¿ç¨‹æ‰£åº“å­˜æ“ä½œæˆåŠŸï¼Œå…¶ä»–ç›¸åŒç‰ˆæœ¬å·çš„çº¿ç¨‹ç§’æ€å¤±è´¥ï¼Œå°±ä¸ä¼šå­˜åœ¨<strong>å–è¶…é—®é¢˜</strong>äº†</p> <p>ä¸è¿‡ç°åœ¨æ¯æ¬¡è¯»å–åº“å­˜éƒ½å»æŸ¥æ•°æ®åº“ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹ä¸‹<strong>Druid</strong>çš„ç›‘æ§ï¼Œåœ°å€: <a href="http://localhost:8080/druid/sql.html" target="_blank" rel="noopener noreferrer">http://localhost:8080/druid/sql.html<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p><img src="https://cdn.jsdelivr.net/gh/wliduo/CDN@1.1/2019/11/20191123005.png" alt="å›¾ç‰‡"></p> <p>å¯ä»¥çœ‹åˆ°ï¼ŒæŸ¥è¯¢åº“å­˜æ‰§è¡Œäº†<strong>500</strong>æ¬¡ï¼Œéµä»<strong>æœ€åè½åœ°åˆ°æ•°æ®åº“çš„è¯·æ±‚æ•°è¦å°½é‡å°‘</strong>çš„åŸåˆ™ï¼Œå…¶å®æˆ‘ä»¬å¯ä»¥æŠŠè¿™ä¸ªæ•°æ®æ”¾ç¼“å­˜ï¼Œæå‡æ€§èƒ½</p> <h3 id="_4-3-ä½¿ç”¨ç¼“å­˜"><a href="#_4-3-ä½¿ç”¨ç¼“å­˜" class="header-anchor">#</a> 4.3. ä½¿ç”¨ç¼“å­˜</h3> <p>æˆ‘ä»¬ç»§ç»­æ­å»ºä¸€ä¸ªåå°æœåŠ¡æ¥å£(å®ç°æ ¡éªŒåº“å­˜ï¼Œæ‰£åº“å­˜ï¼Œåˆ›å»ºè®¢å•)ï¼Œè¿™æ¬¡æˆ‘ä»¬å¼•å…¥<strong>ç¼“å­˜</strong>ï¼Œè¿™é‡Œå¯ä»¥å…ˆæŸ¥çœ‹ä¸€ç¯‡æ–‡ç« : <a href="https://note.dolyw.com/cache/00-DataBaseConsistency.html" target="_blank" rel="noopener noreferrer">Redisä¸æ•°æ®åº“ä¸€è‡´æ€§<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p>è¿™é‡Œæˆ‘é‡‡ç”¨çš„æ˜¯<strong>å…ˆæ›´æ–°æ•°æ®åº“å†æ›´æ–°ç¼“å­˜</strong>ï¼Œå› ä¸ºè¿™é‡Œ<strong>ç¼“å­˜æ•°æ®è®¡ç®—ç®€å•</strong>ï¼Œåªéœ€è¦è¿›è¡ŒåŠ å‡ä¸€å³å¯ï¼Œæ‰€ä»¥æˆ‘ä»¬ç›´æ¥è¿›è¡Œæ›´æ–°ç¼“å­˜</p> <p>è¿™æ¬¡ä¸»è¦æ”¹é€ æ˜¯<strong>æ£€æŸ¥åº“å­˜å’Œæ‰£åº“å­˜</strong>æ–¹æ³•ï¼Œ<strong>æ£€æŸ¥åº“å­˜</strong>ç›´æ¥å»<strong>Redis</strong>è·å–ï¼Œä¸å†å»æŸ¥æ•°æ®åº“ï¼Œè€Œåœ¨<strong>æ‰£åº“å­˜</strong>è¿™é‡Œæœ¬èº«æ˜¯ä½¿ç”¨çš„ä¹è§‚é”æ“ä½œï¼Œåªæœ‰æ“ä½œæˆåŠŸ(æ‰£åº“å­˜æˆåŠŸ)çš„æ‰éœ€è¦<strong>æ›´æ–°ç¼“å­˜æ•°æ®</strong></p> <p>ä½¿ç”¨<strong>JMeter</strong>ï¼Œæ¨¡æ‹Ÿ<strong>500</strong>ä¸ªå¹¶å‘çº¿ç¨‹æµ‹è¯•è´­ä¹°<strong>10</strong>ä¸ªåº“å­˜çš„å•†å“ï¼Œåœ°å€: <a href="/seckill-evolution/03-Optimistic-Lock-Redis.html">3. ä½¿ç”¨ç¼“å­˜</a></p> <p>æˆ‘ä»¬å¯ä»¥çœ‹ä¸‹ä½¿ç”¨ç¼“å­˜å<strong>Druid</strong>çš„ç›‘æ§ï¼Œåœ°å€: <a href="http://localhost:8080/druid/sql.html" target="_blank" rel="noopener noreferrer">http://localhost:8080/druid/sql.html<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p>ä½¿ç”¨äº†ç¼“å­˜ï¼Œå¯ä»¥çœ‹åˆ°åº“å­˜æŸ¥è¯¢<strong>SQL</strong>ï¼Œ<strong>åªæ‰§è¡Œäº†ä¸€æ¬¡ï¼Œå°±æ˜¯ç¼“å­˜é¢„çƒ­é‚£æ‰§è¡Œäº†ä¸€æ¬¡</strong>ï¼Œä¸åƒä¹‹å‰æ¯æ¬¡åº“å­˜éƒ½å»æŸ¥æ•°æ®åº“</p> <p><img src="https://cdn.jsdelivr.net/gh/wliduo/CDN@1.1/2019/11/20191123010.png" alt="å›¾ç‰‡"></p> <p>ä¸è¿‡<strong>ä¹è§‚é”æ›´æ–°</strong>æ“ä½œè¿˜æ˜¯æ‰§è¡Œäº†<strong>157</strong>æ¬¡<strong>SQL</strong>ï¼Œéµä»<strong>æœ€åè½åœ°åˆ°æ•°æ®åº“çš„è¯·æ±‚æ•°è¦å°½é‡å°‘</strong>çš„åŸåˆ™ï¼Œæœ‰æ²¡æœ‰åŠæ³•ä¼˜åŒ–è¿™é‡Œå‘¢ï¼Œå¯ä»¥çš„ï¼Œ<strong>å®é™…ä¸Šå¾ˆå¤šéƒ½æ˜¯æ— æ•ˆè¯·æ±‚</strong>ï¼Œè¿™é‡Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨<strong>é™æµ</strong>ï¼ŒæŠŠå¤§éƒ¨åˆ†æ— æ•ˆè¯·æ±‚æ‹¦æˆªäº†ï¼Œå°½å¯èƒ½ä¿è¯æœ€ç»ˆåˆ°è¾¾æ•°æ®åº“çš„éƒ½æ˜¯æœ‰æ•ˆè¯·æ±‚</p> <h3 id="_4-4-ä½¿ç”¨åˆ†å¸ƒå¼é™æµ"><a href="#_4-4-ä½¿ç”¨åˆ†å¸ƒå¼é™æµ" class="header-anchor">#</a> 4.4. ä½¿ç”¨åˆ†å¸ƒå¼é™æµ</h3> <p>æˆ‘ä»¬ç»§ç»­æ­å»ºä¸€ä¸ªåå°æœåŠ¡æ¥å£(å®ç°æ ¡éªŒåº“å­˜ï¼Œæ‰£åº“å­˜ï¼Œåˆ›å»ºè®¢å•)ï¼Œè¿™æ¬¡æˆ‘ä»¬å¼•å…¥<strong>é™æµ</strong>ï¼Œè¿™é‡Œå¯ä»¥å…ˆæŸ¥çœ‹ä¸€ç¯‡æ–‡ç« : <a href="http://note.dolyw.com/distributed/02-Distributed-Limit.html" target="_blank" rel="noopener noreferrer">é«˜å¹¶å‘ä¸‹çš„é™æµåˆ†æ<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p>ä½¿ç”¨<strong>JMeter</strong>ï¼Œæ¨¡æ‹Ÿ<strong>500</strong>ä¸ªå¹¶å‘çº¿ç¨‹æµ‹è¯•è´­ä¹°<strong>10</strong>ä¸ªåº“å­˜çš„å•†å“ï¼Œåœ°å€: <a href="/seckill-evolution/04-Distributed-Limit.html">4. ä½¿ç”¨åˆ†å¸ƒå¼é™æµ</a></p> <p>æˆ‘ä»¬å¯ä»¥çœ‹ä¸‹ Druid çš„ç›‘æ§ï¼Œåœ°å€: <a href="http://localhost:8080/druid/sql.html" target="_blank" rel="noopener noreferrer">http://localhost:8080/druid/sql.html<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p><img src="https://cdn.jsdelivr.net/gh/wliduo/CDN@1.1/2019/11/20191127004.png" alt="å›¾ç‰‡"></p> <p><strong>ä½¿ç”¨äº†é™æµï¼Œå¯ä»¥çœ‹åˆ°ä¹è§‚é”æ›´æ–°ä¸åƒä¹‹å‰é‚£æ ·æ‰§è¡Œ 157 æ¬¡äº†ï¼Œåªæ‰§è¡Œäº† 36 æ¬¡ï¼Œå¾ˆå¤šè¯·æ±‚ç›´æ¥è¢«é™æµäº†</strong>ï¼Œæˆ‘ä»¬çœ‹ä¸‹åå°æ—¥å¿—ï¼Œå¯ä»¥çœ‹åˆ°å¾ˆå¤šè¯·æ±‚ç›´æ¥è¢«é™æµé™åˆ¶äº†ï¼Œè¿™æ ·å°±è¾¾åˆ°äº†æˆ‘ä»¬çš„ç›®çš„</p> <p><img src="https://cdn.jsdelivr.net/gh/wliduo/CDN@1.1/2019/11/20191127005.png" alt="å›¾ç‰‡"></p> <h3 id="_4-5-ä½¿ç”¨é˜Ÿåˆ—å¼‚æ­¥ä¸‹å•"><a href="#_4-5-ä½¿ç”¨é˜Ÿåˆ—å¼‚æ­¥ä¸‹å•" class="header-anchor">#</a> 4.5. ä½¿ç”¨é˜Ÿåˆ—å¼‚æ­¥ä¸‹å•</h3> <p>é‚£æˆ‘ä»¬è¿˜å¯ä»¥æ€ä¹ˆä¼˜åŒ–æé«˜ååé‡ä»¥åŠæ€§èƒ½å‘¢ï¼Œæˆ‘ä»¬ä¸Šæ–‡æ‰€æœ‰ä¾‹å­å…¶å®éƒ½æ˜¯<strong>åŒæ­¥è¯·æ±‚</strong>ï¼Œå®Œå…¨å¯ä»¥åˆ©ç”¨<strong>åŒæ­¥è½¬å¼‚æ­¥æ¥æé«˜æ€§èƒ½</strong>ï¼Œè¿™é‡Œæˆ‘ä»¬å°†ä¸‹è®¢å•çš„æ“ä½œè¿›è¡Œå¼‚æ­¥åŒ–ï¼Œåˆ©ç”¨æ¶ˆæ¯é˜Ÿåˆ—æ¥è¿›è¡Œè§£è€¦ï¼Œè¿™æ ·å¯ä»¥è®© DB å¼‚æ­¥æ‰§è¡Œä¸‹å•</p> <p><strong>æ¯å½“ä¸€ä¸ªè¯·æ±‚é€šè¿‡äº†é™æµå’Œåº“å­˜æ ¡éªŒä¹‹åå°±å°†è®¢å•ä¿¡æ¯å‘ç»™æ¶ˆæ¯é˜Ÿåˆ—ï¼Œè¿™æ ·ä¸€ä¸ªè¯·æ±‚å°±å¯ä»¥ç›´æ¥è¿”å›äº†ï¼Œæ¶ˆè´¹ç¨‹åºåšä¸‹è®¢å•çš„æ“ä½œï¼Œå¯¹æ•°æ®è¿›è¡Œå…¥åº“è½åœ°</strong>ï¼Œå› ä¸ºå¼‚æ­¥äº†ï¼Œæ‰€ä»¥æœ€ç»ˆéœ€è¦é‡‡å–å›è°ƒæˆ–è€…æ˜¯å…¶ä»–æé†’çš„æ–¹å¼æé†’ç”¨æˆ·è´­ä¹°å®Œæˆ</p> <p>åœ°å€: <a href="/seckill-evolution/05-MQ-Async.html">5. ä½¿ç”¨é˜Ÿåˆ—å¼‚æ­¥ä¸‹å•</a></p></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/dolyw/Note/edit/master/doc/seckill-evolution/00-Preparation.md" target="_blank" rel="noopener noreferrer">åœ¨ GitHub ä¸Šç¼–è¾‘æ­¤é¡µ</a> <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div> <div class="last-updated"><span class="prefix">ä¸Šæ¬¡æ›´æ–°æ—¶é—´:</span> <span class="time">2020-12-09 15:06:53</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      â†
      <a href="/seckill-evolution/" class="prev router-link-active">
        SeckillEvolution
      </a></span> <span class="next"><a href="/seckill-evolution/01-Tradition-Process.html">
        1. ä¼ ç»Ÿæ–¹å¼
      </a>
      â†’
    </span></p></div> </main></div><div class="global-ui"><div class="diy-loader center" style="display:none;" data-v-184c1df1><div class="center-box" data-v-184c1df1><div class="loader_overlay" data-v-184c1df1></div> <div class="loader_cogs" data-v-184c1df1><div class="loader_cogs__top" data-v-184c1df1><div class="top_part" data-v-184c1df1></div> <div class="top_part" data-v-184c1df1></div> <div class="top_part" data-v-184c1df1></div> <div class="top_hole" data-v-184c1df1></div></div> <div class="loader_cogs__left" data-v-184c1df1><div class="left_part" data-v-184c1df1></div> <div class="left_part" data-v-184c1df1></div> <div class="left_part" data-v-184c1df1></div> <div class="left_hole" data-v-184c1df1></div></div> <div class="loader_cogs__bottom" data-v-184c1df1><div class="bottom_part" data-v-184c1df1></div> <div class="bottom_part" data-v-184c1df1></div> <div class="bottom_part" data-v-184c1df1></div> <div class="bottom_hole" data-v-184c1df1></div></div></div> <p class="loading-text" data-v-184c1df1>
      é¡µé¢åŠ è½½ä¸­<span class="dot" data-v-184c1df1>...</span></p></div></div><!----></div></div>
    <script src="/assets/js/app.89b51cd7.js" defer></script><script src="/assets/js/2.709773e9.js" defer></script><script src="/assets/js/150.77610629.js" defer></script>
  </body>
</html>
